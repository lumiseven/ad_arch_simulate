# 日志配置文件
# 支持多种日志格式和输出目标

[loggers]
keys=root,ad_management,dsp,ssp,ad_exchange,dmp,system,rtb,database

[handlers]
keys=consoleHandler,fileHandler,systemHandler,rtbHandler,databaseHandler,errorHandler

[formatters]
keys=simpleFormatter,detailedFormatter,jsonFormatter,rtbFormatter

# 日志记录器配置
[logger_root]
level=INFO
handlers=consoleHandler,fileHandler

[logger_ad_management]
level=INFO
handlers=consoleHandler,fileHandler
qualname=ad-management
propagate=0

[logger_dsp]
level=INFO
handlers=consoleHandler,fileHandler
qualname=dsp
propagate=0

[logger_ssp]
level=INFO
handlers=consoleHandler,fileHandler
qualname=ssp
propagate=0

[logger_ad_exchange]
level=INFO
handlers=consoleHandler,fileHandler,rtbHandler
qualname=ad-exchange
propagate=0

[logger_dmp]
level=INFO
handlers=consoleHandler,fileHandler
qualname=dmp
propagate=0

[logger_system]
level=INFO
handlers=consoleHandler,systemHandler
qualname=system
propagate=0

[logger_rtb]
level=INFO
handlers=consoleHandler,rtbHandler
qualname=rtb
propagate=0

[logger_database]
level=WARNING
handlers=consoleHandler,databaseHandler
qualname=database
propagate=0

# 处理器配置
[handler_consoleHandler]
class=StreamHandler
level=INFO
formatter=simpleFormatter
args=(sys.stdout,)

[handler_fileHandler]
class=handlers.RotatingFileHandler
level=INFO
formatter=detailedFormatter
args=('logs/application.log', 'a', 10485760, 5, 'utf-8')

[handler_systemHandler]
class=handlers.RotatingFileHandler
level=INFO
formatter=jsonFormatter
args=('logs/system.log', 'a', 10485760, 5, 'utf-8')

[handler_rtbHandler]
class=handlers.RotatingFileHandler
level=INFO
formatter=rtbFormatter
args=('logs/rtb.log', 'a', 10485760, 5, 'utf-8')

[handler_databaseHandler]
class=handlers.RotatingFileHandler
level=WARNING
formatter=detailedFormatter
args=('logs/database.log', 'a', 10485760, 5, 'utf-8')

[handler_errorHandler]
class=handlers.RotatingFileHandler
level=ERROR
formatter=detailedFormatter
args=('logs/error.log', 'a', 10485760, 5, 'utf-8')

# 格式化器配置
[formatter_simpleFormatter]
format=%(asctime)s - %(name)s - %(levelname)s - %(message)s
datefmt=%Y-%m-%d %H:%M:%S

[formatter_detailedFormatter]
format=%(asctime)s - %(name)s - %(levelname)s - %(filename)s:%(lineno)d - %(funcName)s - %(message)s
datefmt=%Y-%m-%d %H:%M:%S

[formatter_jsonFormatter]
format={"timestamp": "%(asctime)s", "service": "%(name)s", "level": "%(levelname)s", "message": "%(message)s", "file": "%(filename)s", "line": %(lineno)d}
datefmt=%Y-%m-%dT%H:%M:%S

[formatter_rtbFormatter]
format=%(asctime)s - RTB - %(levelname)s - %(message)s
datefmt=%Y-%m-%d %H:%M:%S