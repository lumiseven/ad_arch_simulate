# äº’è”ç½‘å¹¿å‘Šç³»ç»Ÿæ¶æ„æ¼”ç¤º

è¿™æ˜¯ä¸€ä¸ªç”¨äºç†è§£ç°ä»£ç¨‹åºåŒ–å¹¿å‘Šç”Ÿæ€ç³»ç»Ÿçš„æ¶æ„æ¼”ç¤ºé¡¹ç›®ï¼Œå±•ç¤ºäº†å®Œæ•´çš„å®æ—¶ç«ä»·(RTB)å·¥ä½œæµç¨‹ã€‚ç³»ç»ŸåŒ…å«äº”ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œé‡‡ç”¨å¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼Œæ”¯æŒå®Œæ•´çš„å¹¿å‘ŠæŠ•æ”¾ç”Ÿå‘½å‘¨æœŸã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒç»„ä»¶è¯¦è§£

1. **å¹¿å‘Šç®¡ç†å¹³å° (Ad Management) - ç«¯å£8001**
   - **åŠŸèƒ½**: ä¸ºå¹¿å‘Šä¸»æä¾›å¹¿å‘Šæ´»åŠ¨å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
   - **æ ¸å¿ƒç‰¹æ€§**: æ´»åŠ¨åˆ›å»ºã€é¢„ç®—ç®¡ç†ã€å®šå‘è®¾ç½®ã€åˆ›æ„ç®¡ç†ã€ç»Ÿè®¡æŠ¥è¡¨
   - **æŠ€æœ¯æ ˆ**: FastAPI + SQLAlchemy + SQLite
   - **æ•°æ®æ¨¡å‹**: Campaign, CampaignStats
   - **å…³é”®API**: `/campaigns`, `/campaigns/{id}/stats`, `/campaigns/{id}/spend`

2. **éœ€æ±‚æ–¹å¹³å° (DSP) - ç«¯å£8002**
   - **åŠŸèƒ½**: ä»£è¡¨å¹¿å‘Šä¸»å‚ä¸å®æ—¶ç«ä»·ï¼Œå®ç°ç²¾å‡†æŠ•æ”¾
   - **æ ¸å¿ƒç‰¹æ€§**: ç«ä»·å†³ç­–ã€ç”¨æˆ·ç”»åƒåŒ¹é…ã€é¢„ç®—æ§åˆ¶ã€é¢‘æ¬¡é™åˆ¶
   - **æŠ€æœ¯æ ˆ**: FastAPI + å†…å­˜å­˜å‚¨ + å¼‚æ­¥å¤„ç†
   - **ç®—æ³•**: æ™ºèƒ½å‡ºä»·ç®—æ³•ã€å®šå‘åŒ¹é…ç®—æ³•
   - **å…³é”®API**: `/bid`, `/win-notice`, `/campaigns`, `/stats`

3. **ä¾›åº”æ–¹å¹³å° (SSP) - ç«¯å£8003**
   - **åŠŸèƒ½**: ä¸ºåª’ä½“æ–¹ç®¡ç†å¹¿å‘Šä½åº“å­˜ï¼Œæœ€å¤§åŒ–å¹¿å‘Šæ”¶ç›Š
   - **æ ¸å¿ƒç‰¹æ€§**: åº“å­˜ç®¡ç†ã€æ”¶ç›Šä¼˜åŒ–ã€å±•ç¤ºç»Ÿè®¡ã€æŠ¥è¡¨ç”Ÿæˆ
   - **æŠ€æœ¯æ ˆ**: FastAPI + httpx + å¼‚æ­¥é€šä¿¡
   - **ä¼˜åŒ–ç­–ç•¥**: å®æ—¶ç«ä»·ã€æ”¶ç›Šæœ€å¤§åŒ–ç®—æ³•
   - **å…³é”®API**: `/ad-request`, `/inventory`, `/revenue`, `/impression`

4. **å¹¿å‘Šäº¤æ˜“å¹³å° (Ad Exchange) - ç«¯å£8004**
   - **åŠŸèƒ½**: è¿æ¥DSPå’ŒSSPï¼Œæ‰§è¡Œå®æ—¶ç«ä»·äº¤æ˜“
   - **æ ¸å¿ƒç‰¹æ€§**: RTBæµç¨‹åè°ƒã€å¹¶è¡Œç«ä»·ã€ä»·æ ¼å‘ç°ã€äº¤æ˜“è®°å½•
   - **æŠ€æœ¯æ ˆ**: FastAPI + asyncio + å¹¶å‘å¤„ç†
   - **æ€§èƒ½**: 100mså†…å®Œæˆå®Œæ•´RTBæµç¨‹
   - **å…³é”®API**: `/rtb`, `/demo/rtb-flow`, `/auction/{id}`

5. **æ•°æ®ç®¡ç†å¹³å° (DMP) - ç«¯å£8005**
   - **åŠŸèƒ½**: ç®¡ç†ç”¨æˆ·ç”»åƒå’Œè¡Œä¸ºæ•°æ®ï¼Œæ”¯æŒç²¾å‡†å®šå‘
   - **æ ¸å¿ƒç‰¹æ€§**: ç”¨æˆ·ç”»åƒæ„å»ºã€è¡Œä¸ºè¿½è¸ªã€æ™ºèƒ½åˆ†ç¾¤ã€æ•°æ®æ¸…ç†
   - **æŠ€æœ¯æ ˆ**: FastAPI + å†…å­˜å­˜å‚¨ + å®æ—¶å¤„ç†
   - **æ•°æ®ç±»å‹**: äººå£ç»Ÿè®¡ã€å…´è¶£æ ‡ç­¾ã€è¡Œä¸ºæ ‡ç­¾ã€ç”¨æˆ·åˆ†ç¾¤
   - **å…³é”®API**: `/user/{id}/profile`, `/user/{id}/events`, `/segments`

### ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    User[ğŸ‘¤ ç”¨æˆ·è®¿é—®åª’ä½“é¡µé¢] --> SSP[ğŸ“º ä¾›åº”æ–¹å¹³å°<br/>SSP:8003<br/>å¹¿å‘Šä½ç®¡ç†]
    SSP --> AdEx[ğŸ›ï¸ å¹¿å‘Šäº¤æ˜“å¹³å°<br/>Ad Exchange:8004<br/>RTBåè°ƒä¸­å¿ƒ]
    AdEx --> DSP1[ğŸ’° éœ€æ±‚æ–¹å¹³å°<br/>DSP:8002<br/>ç«ä»·å†³ç­–]
    DSP1 --> DMP[ğŸ“Š æ•°æ®ç®¡ç†å¹³å°<br/>DMP:8005<br/>ç”¨æˆ·ç”»åƒ]
    AdMgmt[ğŸ¯ å¹¿å‘Šç®¡ç†å¹³å°<br/>Ad Management:8001<br/>æ´»åŠ¨ç®¡ç†] --> DSP1
    
    subgraph "ğŸ”„ RTBå®æ—¶ç«ä»·æµç¨‹"
        direction LR
        A[1.ç”¨æˆ·è®¿é—®] --> B[2.å¹¿å‘Šè¯·æ±‚]
        B --> C[3.ç«ä»·åè°ƒ]
        C --> D[4.DSPç«ä»·]
        D --> E[5.é€‰æ‹©è·èƒœè€…]
        E --> F[6.å¹¿å‘Šå±•ç¤º]
        F --> G[7.æ•°æ®åé¦ˆ]
    end
    
    subgraph "ğŸ’¾ æ•°æ®å­˜å‚¨å±‚"
        DB1[(SQLite<br/>æ´»åŠ¨æ•°æ®)]
        DB2[(å†…å­˜å­˜å‚¨<br/>ç”¨æˆ·ç”»åƒ)]
        DB3[(å†…å­˜å­˜å‚¨<br/>ç«ä»·å†å²)]
    end
    
    AdMgmt -.-> DB1
    DMP -.-> DB2
    AdEx -.-> DB3
```

### æŠ€æœ¯æ¶æ„å±‚æ¬¡

```mermaid
graph TD
    subgraph "ğŸŒ APIç½‘å…³å±‚"
        API[FastAPIæœåŠ¡é›†ç¾¤<br/>ç«¯å£: 8001-8005]
    end
    
    subgraph "ğŸ§  ä¸šåŠ¡é€»è¾‘å±‚"
        BL1[å¹¿å‘Šæ´»åŠ¨ç®¡ç†]
        BL2[ç«ä»·å†³ç­–å¼•æ“]
        BL3[æ”¶ç›Šä¼˜åŒ–ç®—æ³•]
        BL4[RTBæµç¨‹åè°ƒ]
        BL5[ç”¨æˆ·ç”»åƒæ„å»º]
    end
    
    subgraph "ğŸ’¾ æ•°æ®è®¿é—®å±‚"
        DAL1[SQLAlchemy ORM]
        DAL2[å†…å­˜æ•°æ®ç»“æ„]
        DAL3[å¼‚æ­¥æ•°æ®åº“è¿æ¥]
    end
    
    subgraph "ğŸ—„ï¸ å­˜å‚¨å±‚"
        ST1[(SQLiteæ•°æ®åº“)]
        ST2[(å†…å­˜å­˜å‚¨)]
        ST3[(æ—¥å¿—æ–‡ä»¶)]
    end
    
    API --> BL1
    API --> BL2
    API --> BL3
    API --> BL4
    API --> BL5
    
    BL1 --> DAL1
    BL2 --> DAL2
    BL3 --> DAL2
    BL4 --> DAL2
    BL5 --> DAL2
    
    DAL1 --> ST1
    DAL2 --> ST2
    DAL3 --> ST3
```

## ğŸ“ é¡¹ç›®ç»“æ„

```text
ad-system-architecture/
â”œâ”€â”€ ğŸ“„ pyproject.toml              # é¡¹ç›®é…ç½®å’Œä¾èµ–ç®¡ç†
â”œâ”€â”€ ğŸ³ Dockerfile                  # Docker å®¹å™¨é…ç½®
â”œâ”€â”€ ğŸ³ docker-compose.yml          # Docker Compose é…ç½®
â”œâ”€â”€ ğŸ“ server/                     # æœåŠ¡å®ç°
â”‚   â”œâ”€â”€ ğŸ“ ad-management/          # å¹¿å‘Šç®¡ç†å¹³å°æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“ dsp/                    # éœ€æ±‚æ–¹å¹³å°æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“ ssp/                    # ä¾›åº”æ–¹å¹³å°æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“ ad-exchange/            # å¹¿å‘Šäº¤æ˜“å¹³å°æœåŠ¡
â”‚   â””â”€â”€ ğŸ“ dmp/                    # æ•°æ®ç®¡ç†å¹³å°æœåŠ¡
â”œâ”€â”€ ğŸ“ shared/                     # å…±äº«æ¨¡å—å’Œå·¥å…·
â”‚   â”œâ”€â”€ ğŸ“„ models.py               # Pydanticæ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ ğŸ“„ utils.py                # é€šç”¨å·¥å…·å’Œè¾…åŠ©å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“„ database.py             # æ•°æ®åº“è¿æ¥å’Œæ¨¡å‹
â”‚   â”œâ”€â”€ ğŸ“„ config.py               # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ ğŸ“„ monitoring.py           # ç›‘æ§å’ŒæŒ‡æ ‡æ”¶é›†
â”œâ”€â”€ ğŸ“ tests/                      # æµ‹è¯•å¥—ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ test_*_service.py       # å„æœåŠ¡å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ test_rtb_demo_flow.py   # RTBæµç¨‹é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ test_service_communication.py # æœåŠ¡é€šä¿¡æµ‹è¯•
â”‚   â””â”€â”€ ğŸ“„ test_system_integration.py # ç³»ç»Ÿé›†æˆæµ‹è¯•
â”œâ”€â”€ ğŸ“ scripts/                    # å®ç”¨è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“„ start_services.py       # å¯åŠ¨æ‰€æœ‰æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“„ start_single_service.py # å¯åŠ¨å•ä¸ªæœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“„ production_deploy.py    # ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
â”‚   â””â”€â”€ ğŸ“„ init_database.py        # æ•°æ®åº“åˆå§‹åŒ–
â”œâ”€â”€ ğŸ“ docs/                       # æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“„ deployment.md           # éƒ¨ç½²å’Œè¿è¡Œæ–‡æ¡£
â”‚   â””â”€â”€ ğŸ“„ api-documentation.md    # APIæ¥å£æ–‡æ¡£
â”œâ”€â”€ ğŸ“ config/                     # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ logging.conf            # æ—¥å¿—é…ç½®
â”‚   â””â”€â”€ ğŸ“„ monitoring.yml          # ç›‘æ§é…ç½®
â””â”€â”€ ğŸ“ logs/                       # æ—¥å¿—æ–‡ä»¶ç›®å½•
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒ

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd ad-system-architecture

# 2. å®‰è£… uv (Python åŒ…ç®¡ç†å™¨)
pip install uv

# 3. å®‰è£…é¡¹ç›®ä¾èµ–
uv sync

# 4. åˆå§‹åŒ–æ•°æ®åº“
python scripts/init_database.py

# 5. å¯åŠ¨æ‰€æœ‰æœåŠ¡
python scripts/start_services.py
```

### æ–¹å¼äºŒï¼šDocker å®¹å™¨åŒ–éƒ¨ç½²

```bash
# ä½¿ç”¨ Docker Compose å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### æ–¹å¼ä¸‰ï¼šå•å®¹å™¨éƒ¨ç½²

```bash
# å¯åŠ¨å•å®¹å™¨æ¨¡å¼ï¼ˆæ‰€æœ‰æœåŠ¡åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ï¼‰
docker-compose --profile all-in-one up -d ad-system-all
```

## ğŸŒ æœåŠ¡è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ | API æ–‡æ¡£ | æè¿° |
|------|------|----------|------|
| å¹¿å‘Šç®¡ç†å¹³å° | http://localhost:8001 | http://localhost:8001/docs | ç®¡ç†å¹¿å‘Šæ´»åŠ¨å’Œé¢„ç®— |
| éœ€æ±‚æ–¹å¹³å° (DSP) | http://localhost:8002 | http://localhost:8002/docs | å®æ—¶ç«ä»·å†³ç­– |
| ä¾›åº”æ–¹å¹³å° (SSP) | http://localhost:8003 | http://localhost:8003/docs | å¹¿å‘Šä½ç®¡ç†å’Œæ”¶ç›Šä¼˜åŒ– |
| å¹¿å‘Šäº¤æ˜“å¹³å° | http://localhost:8004 | http://localhost:8004/docs | RTBæµç¨‹åè°ƒ |
| æ•°æ®ç®¡ç†å¹³å° (DMP) | http://localhost:8005 | http://localhost:8005/docs | ç”¨æˆ·ç”»åƒç®¡ç† |

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º

### RTB å®æ—¶ç«ä»·æ¼”ç¤º

#### åŸºç¡€RTBæµç¨‹æ¼”ç¤º
```bash
# æ‰§è¡Œç®€åŒ–çš„RTBæµç¨‹æ¼”ç¤º (æ¨èæ–°æ‰‹ä½¿ç”¨)
curl -X POST http://localhost:8004/demo/rtb-flow-simple

# å“åº”ç¤ºä¾‹:
{
  "workflow_id": "wf-12345",
  "status": "success", 
  "duration_ms": 85.2,
  "winning_campaign": "camp-001",
  "final_price": 0.65,
  "impression_confirmed": true
}
```

#### å®Œæ•´RTBæµç¨‹æ¼”ç¤º
```bash
# æŸ¥çœ‹è¯¦ç»†çš„RTBæµç¨‹ (åŒ…å«æ‰€æœ‰æ­¥éª¤æ•°æ®)
curl -X POST http://localhost:8004/demo/rtb-flow

# è‡ªå®šä¹‰ç”¨æˆ·ä¸Šä¸‹æ–‡çš„RTBæµç¨‹
curl -X POST http://localhost:8004/demo/rtb-flow \
  -H "Content-Type: application/json" \
  -d '{
    "user_context": {
      "user_id": "user-12345",
      "device_type": "mobile",
      "location": {"country": "US", "city": "San Francisco"}
    }
  }'
```

#### RTBæµç¨‹ç›‘æ§
```bash
# æŸ¥çœ‹å·¥ä½œæµç¨‹ç»Ÿè®¡
curl http://localhost:8004/demo/workflow-stats

# æŸ¥çœ‹ç«ä»·å†å²
curl http://localhost:8004/auction-history?limit=10

# æŸ¥çœ‹å¹³å°ç»Ÿè®¡
curl http://localhost:8004/stats
```

### RTBæµç¨‹è¯¦è§£

å®æ—¶ç«ä»·(RTB)æ˜¯ç¨‹åºåŒ–å¹¿å‘Šçš„æ ¸å¿ƒï¼Œæ•´ä¸ªæµç¨‹åœ¨100æ¯«ç§’å†…å®Œæˆï¼š

1. **ç”¨æˆ·è®¿é—®** (0ms): ç”¨æˆ·è®¿é—®åª’ä½“é¡µé¢ï¼Œè§¦å‘å¹¿å‘Šè¯·æ±‚
2. **SSPå¤„ç†** (5ms): SSPæ¥æ”¶è¯·æ±‚ï¼Œæ„å»ºç«ä»·è¯·æ±‚
3. **Ad Exchangeåè°ƒ** (10ms): å‘æ‰€æœ‰DSPå¹¶è¡Œå‘é€ç«ä»·è¯·æ±‚  
4. **DSPç«ä»·** (50ms): DSPæŸ¥è¯¢ç”¨æˆ·ç”»åƒï¼Œè®¡ç®—å‡ºä»·
5. **ç«ä»·è¯„ä¼°** (70ms): Ad Exchangeé€‰æ‹©è·èƒœç«ä»·
6. **å¹¿å‘Šå±•ç¤º** (85ms): è¿”å›è·èƒœå¹¿å‘Šç»™SSP
7. **æ•°æ®åé¦ˆ** (100ms): æ›´æ–°ç»Ÿè®¡æ•°æ®ï¼Œè®°å½•ç”¨æˆ·è¡Œä¸º

### å¹¿å‘Šæ´»åŠ¨ç®¡ç†

```bash
# åˆ›å»ºå¹¿å‘Šæ´»åŠ¨
curl -X POST http://localhost:8001/campaigns \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æ˜¥å­£ä¿ƒé”€æ´»åŠ¨",
    "advertiser_id": "advertiser_001",
    "budget": 10000.0,
    "targeting": {
      "age_range": {"min_age": 18, "max_age": 35},
      "interests": ["technology", "shopping"]
    },
    "creative": {
      "title": "æ˜¥å­£å¤§ä¿ƒé”€",
      "description": "å…¨åœºå•†å“8æŠ˜ä¼˜æƒ "
    }
  }'

# æŸ¥çœ‹æ´»åŠ¨è¯¦æƒ…
curl http://localhost:8001/campaigns/{campaign_id}

# æŸ¥çœ‹æ´»åŠ¨ç»Ÿè®¡
curl http://localhost:8001/campaigns/{campaign_id}/stats
```

### ç”¨æˆ·ç”»åƒç®¡ç†

```bash
# è·å–ç”¨æˆ·ç”»åƒ
curl http://localhost:8005/user/{user_id}/profile

# è®°å½•ç”¨æˆ·è¡Œä¸º
curl -X POST http://localhost:8005/user/{user_id}/events \
  -H "Content-Type: application/json" \
  -d '{
    "events": [
      {
        "event_type": "page_view",
        "page_url": "https://example.com/products",
        "timestamp": "2024-01-01T12:00:00Z"
      }
    ]
  }'
```

## ğŸ”§ å¼€å‘å’Œæµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
python -m pytest tests/test_rtb_demo_flow.py -v

# è¿è¡Œé›†æˆæµ‹è¯•
python -m pytest tests/test_system_integration.py -v

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
python -m pytest tests/ --cov=shared --cov=server --cov-report=html
```

### å¯åŠ¨å•ä¸ªæœåŠ¡

```bash
# å¯åŠ¨å•ä¸ªæœåŠ¡ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
python scripts/start_single_service.py ad-exchange --debug

# å¯åŠ¨æŒ‡å®šç«¯å£
python scripts/start_single_service.py dsp --port 9002
```

### ä»£ç è´¨é‡æ£€æŸ¥

```bash
# ä»£ç æ ¼å¼åŒ–
black .

# å¯¼å…¥æ’åº
isort .

# ä»£ç æ£€æŸ¥
flake8 .

# ç±»å‹æ£€æŸ¥
mypy shared/ server/
```

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡å¥åº·çŠ¶æ€
for port in 8001 8002 8003 8004 8005; do
  echo "æ£€æŸ¥ç«¯å£ $port:"
  curl -s http://localhost:$port/health | jq .
done
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f logs/application.log

# æŸ¥çœ‹ RTB æµç¨‹æ—¥å¿—
tail -f logs/rtb.log

# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
tail -f logs/system.log
```

### æ€§èƒ½ç›‘æ§

ç³»ç»Ÿæä¾›å®æ—¶æ€§èƒ½ç›‘æ§ï¼ŒåŒ…æ‹¬ï¼š
- æœåŠ¡å“åº”æ—¶é—´
- RTB æµç¨‹è€—æ—¶ç»Ÿè®¡
- é”™è¯¯ç‡ç›‘æ§
- æ•°æ®åº“è¿æ¥çŠ¶æ€
- ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

## ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### ä½¿ç”¨éƒ¨ç½²è„šæœ¬

```bash
# ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
python scripts/production_deploy.py

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®
python scripts/production_deploy.py --config production.json

# è·³è¿‡å¤‡ä»½å’Œæ£€æŸ¥
python scripts/production_deploy.py --skip-backup --skip-checks
```

### ä½¿ç”¨ systemd æœåŠ¡

```bash
# åˆ›å»º systemd æœåŠ¡æ–‡ä»¶
sudo cp ad-system.service /etc/systemd/system/

# å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡
sudo systemctl enable ad-system
sudo systemctl start ad-system

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status ad-system
```

## ğŸ“š æŠ€æœ¯æ ˆè¯¦è§£

### ğŸ åç«¯æŠ€æœ¯æ ˆ
- **Webæ¡†æ¶**: FastAPI (Python 3.9+) - é«˜æ€§èƒ½å¼‚æ­¥Webæ¡†æ¶
- **åŒ…ç®¡ç†**: uv - ç°ä»£PythonåŒ…ç®¡ç†å™¨ï¼Œæ¯”pipå¿«10-100å€
- **æ•°æ®å­˜å‚¨**: SQLite (å¼€å‘) / PostgreSQL (ç”Ÿäº§) - è½»é‡çº§åˆ°ä¼ä¸šçº§æ•°æ®åº“
- **ORMæ¡†æ¶**: SQLAlchemy 2.0 - å¼‚æ­¥ORMï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢
- **APIé€šä¿¡**: RESTful HTTP APIs + httpx - å¼‚æ­¥HTTPå®¢æˆ·ç«¯
- **æ•°æ®éªŒè¯**: Pydantic v2 - ç±»å‹å®‰å…¨çš„æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- **å¼‚æ­¥å¤„ç†**: asyncio - PythonåŸç”Ÿå¼‚æ­¥ç¼–ç¨‹æ”¯æŒ

### ğŸ”§ å¼€å‘å’Œéƒ¨ç½²å·¥å…·
- **å®¹å™¨åŒ–**: Docker + Docker Compose - ä¸€é”®éƒ¨ç½²å’Œç¯å¢ƒéš”ç¦»
- **æµ‹è¯•æ¡†æ¶**: pytest + pytest-asyncio - å…¨é¢çš„å•å…ƒå’Œé›†æˆæµ‹è¯•
- **ä»£ç è´¨é‡**: black + isort + flake8 + mypy - ä»£ç æ ¼å¼åŒ–å’Œé™æ€æ£€æŸ¥
- **ç›‘æ§**: è‡ªå®šä¹‰ç›‘æ§ç³»ç»Ÿ - å®æ—¶å¥åº·æ£€æŸ¥å’Œæ€§èƒ½ç›‘æ§
- **æ—¥å¿—**: Python logging + ç»“æ„åŒ–æ—¥å¿— - åˆ†çº§æ—¥å¿—å’Œé“¾è·¯è¿½è¸ª

### ğŸ—ï¸ æ¶æ„æ¨¡å¼
- **å¾®æœåŠ¡æ¶æ„**: 5ä¸ªç‹¬ç«‹æœåŠ¡ï¼Œæ¾è€¦åˆé«˜å†…èš
- **å¼‚æ­¥ç¼–ç¨‹**: å…¨é¢ä½¿ç”¨async/awaitï¼Œæ”¯æŒé«˜å¹¶å‘
- **äº‹ä»¶é©±åŠ¨**: åŸºäºHTTP APIçš„äº‹ä»¶é€šä¿¡
- **æ•°æ®é©±åŠ¨**: åŸºäºç”¨æˆ·ç”»åƒçš„æ™ºèƒ½å†³ç­–
- **å®¹é”™è®¾è®¡**: ç†”æ–­å™¨ã€é‡è¯•æœºåˆ¶ã€é™çº§ç­–ç•¥

### ğŸ“Š æ€§èƒ½ç‰¹æ€§
- **é«˜å¹¶å‘**: æ”¯æŒæ•°åƒå¹¶å‘è¯·æ±‚
- **ä½å»¶è¿Ÿ**: RTBæµç¨‹100mså†…å®Œæˆ
- **é«˜å¯ç”¨**: æœåŠ¡å¥åº·æ£€æŸ¥å’Œè‡ªåŠ¨æ¢å¤
- **å¯æ‰©å±•**: æ°´å¹³æ‰©å±•å’Œè´Ÿè½½å‡è¡¡æ”¯æŒ

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§è¯¦è§£

### âœ… å®Œæ•´çš„RTBå·¥ä½œæµç¨‹
- **ç”¨æˆ·è®¿é—®æ¨¡æ‹Ÿ**: æ”¯æŒè‡ªå®šä¹‰ç”¨æˆ·ä¸Šä¸‹æ–‡å’Œè®¾å¤‡ç±»å‹
- **å®æ—¶ç«ä»·å¤„ç†**: 100mså†…å®Œæˆå¤šDSPå¹¶è¡Œç«ä»·
- **æ™ºèƒ½ä»·æ ¼å‘ç°**: æ”¯æŒç¬¬ä¸€ä»·æ ¼å’Œç¬¬äºŒä»·æ ¼ç«ä»·æ¨¡å¼
- **å¹¿å‘Šå±•ç¤ºç¡®è®¤**: å®Œæ•´çš„å±•ç¤ºè¿½è¸ªå’Œæ”¶ç›Šè®¡ç®—
- **æ•°æ®åé¦ˆå¾ªç¯**: å®æ—¶æ›´æ–°ç”¨æˆ·ç”»åƒå’Œæ´»åŠ¨ç»Ÿè®¡
- **æ€§èƒ½ç›‘æ§**: è¯¦ç»†çš„æµç¨‹è€—æ—¶å’ŒæˆåŠŸç‡ç»Ÿè®¡

### âœ… å¾®æœåŠ¡æ¶æ„è®¾è®¡
- **æœåŠ¡ç‹¬ç«‹éƒ¨ç½²**: æ¯ä¸ªæœåŠ¡å¯ç‹¬ç«‹å¯åŠ¨ã€åœæ­¢å’Œæ›´æ–°
- **APIç½‘å…³æ¨¡å¼**: ç»Ÿä¸€çš„æœåŠ¡å‘ç°å’Œè·¯ç”±æœºåˆ¶
- **æœåŠ¡æ³¨å†Œä¸­å¿ƒ**: è‡ªåŠ¨æœåŠ¡æ³¨å†Œå’Œå¥åº·çŠ¶æ€ç®¡ç†
- **ç†”æ–­å™¨æ¨¡å¼**: é˜²æ­¢æœåŠ¡é›ªå´©çš„å®¹é”™æœºåˆ¶
- **è´Ÿè½½å‡è¡¡**: æ”¯æŒå¤šå®ä¾‹éƒ¨ç½²å’Œè¯·æ±‚åˆ†å‘
- **é…ç½®ç®¡ç†**: é›†ä¸­åŒ–é…ç½®å’Œç¯å¢ƒå˜é‡ç®¡ç†

### âœ… æ™ºèƒ½æ•°æ®ç®¡ç†
- **SQLiteæ•°æ®åº“**: è½»é‡çº§å…³ç³»æ•°æ®åº“ï¼Œæ”¯æŒACIDäº‹åŠ¡
- **å¼‚æ­¥ORM**: SQLAlchemy 2.0å¼‚æ­¥æ“ä½œï¼Œé«˜æ€§èƒ½æ•°æ®è®¿é—®
- **æ•°æ®æ¨¡å‹éªŒè¯**: Pydanticä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥å’Œæ•°æ®éªŒè¯
- **è‡ªåŠ¨è¿ç§»**: æ•°æ®åº“ç»“æ„å˜æ›´çš„è‡ªåŠ¨åŒ–è¿ç§»è„šæœ¬
- **æ•°æ®å¤‡ä»½**: å®šæœŸå¤‡ä»½å’Œç¾éš¾æ¢å¤æœºåˆ¶
- **ç¼“å­˜ç­–ç•¥**: å†…å­˜ç¼“å­˜å’Œæ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

### âœ… å…¨é¢ç›‘æ§å’Œæ—¥å¿—
- **å®æ—¶å¥åº·ç›‘æ§**: æœåŠ¡çŠ¶æ€ã€å“åº”æ—¶é—´ã€é”™è¯¯ç‡ç›‘æ§
- **ä¸šåŠ¡æŒ‡æ ‡æ”¶é›†**: RTBæˆåŠŸç‡ã€æ”¶ç›Šç»Ÿè®¡ã€ç”¨æˆ·è¡Œä¸ºåˆ†æ
- **ç»“æ„åŒ–æ—¥å¿—**: JSONæ ¼å¼æ—¥å¿—ï¼Œæ”¯æŒæ—¥å¿—èšåˆå’Œåˆ†æ
- **é“¾è·¯è¿½è¸ª**: å®Œæ•´çš„è¯·æ±‚é“¾è·¯è·Ÿè¸ªå’Œæ€§èƒ½åˆ†æ
- **å‘Šè­¦æœºåˆ¶**: åŸºäºé˜ˆå€¼çš„è‡ªåŠ¨å‘Šè­¦å’Œé€šçŸ¥
- **å¯è§†åŒ–é¢æ¿**: å®æ—¶æ•°æ®å±•ç¤ºå’Œå†å²è¶‹åŠ¿åˆ†æ

### âœ… ä¼ä¸šçº§éƒ¨ç½²æ”¯æŒ
- **Dockerå®¹å™¨åŒ–**: æ ‡å‡†åŒ–çš„å®¹å™¨é•œåƒå’Œéƒ¨ç½²æµç¨‹
- **Docker Compose**: ä¸€é”®å¯åŠ¨å®Œæ•´çš„æœåŠ¡æ ˆ
- **ç”Ÿäº§ç¯å¢ƒé…ç½®**: é’ˆå¯¹ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–çš„é…ç½®æ¨¡æ¿
- **è‡ªåŠ¨åŒ–éƒ¨ç½²**: CI/CDæµæ°´çº¿å’Œè“ç»¿éƒ¨ç½²æ”¯æŒ
- **ç¯å¢ƒéš”ç¦»**: å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨éš”ç¦»
- **æ‰©å®¹ç­–ç•¥**: æ°´å¹³æ‰©å±•å’Œè‡ªåŠ¨ä¼¸ç¼©é…ç½®

### âœ… å…¨æ–¹ä½æµ‹è¯•è¦†ç›–
- **å•å…ƒæµ‹è¯•**: æ¯ä¸ªå‡½æ•°å’Œç±»çš„ç‹¬ç«‹æµ‹è¯•ï¼Œè¦†ç›–ç‡>90%
- **é›†æˆæµ‹è¯•**: æœåŠ¡é—´é€šä¿¡å’Œæ•°æ®æµæµ‹è¯•
- **ç«¯åˆ°ç«¯æµ‹è¯•**: å®Œæ•´ä¸šåŠ¡æµç¨‹çš„è‡ªåŠ¨åŒ–æµ‹è¯•
- **æ€§èƒ½æµ‹è¯•**: å¹¶å‘å‹åŠ›æµ‹è¯•å’Œæ€§èƒ½åŸºå‡†æµ‹è¯•
- **å¥‘çº¦æµ‹è¯•**: APIæ¥å£çš„å¥‘çº¦éªŒè¯å’Œå…¼å®¹æ€§æµ‹è¯•
- **æ··æ²Œå·¥ç¨‹**: æ•…éšœæ³¨å…¥å’Œç³»ç»ŸéŸ§æ€§æµ‹è¯•

## ğŸ” ç³»ç»Ÿå®ç°ç»†èŠ‚

### æ ¸å¿ƒç®—æ³•å’Œç­–ç•¥

#### RTBç«ä»·ç®—æ³•
```python
# DSPç«ä»·ä»·æ ¼è®¡ç®—é€»è¾‘
def calculate_bid_price(campaign, bid_request, user_profile):
    base_price = 0.5  # åŸºç¡€ä»·æ ¼
    
    # æ ¹æ®ç”¨æˆ·ç”»åƒè´¨é‡è°ƒæ•´
    if user_profile:
        profile_score = len(user_profile.interests) + len(user_profile.segments)
        base_price *= (1 + profile_score * 0.1)
    
    # æ ¹æ®è®¾å¤‡ç±»å‹è°ƒæ•´
    device_multipliers = {"mobile": 1.2, "desktop": 1.0, "tablet": 0.9}
    base_price *= device_multipliers.get(bid_request.device.type, 1.0)
    
    # ç¡®ä¿æ»¡è¶³åº•ä»·è¦æ±‚
    return max(base_price, bid_request.ad_slot.floor_price * 1.1)
```

#### ç”¨æˆ·åˆ†ç¾¤ç®—æ³•
```python
# DMPæ™ºèƒ½ç”¨æˆ·åˆ†ç¾¤é€»è¾‘
def update_user_segments(user_id, profile):
    # é«˜ä»·å€¼ç”¨æˆ·ï¼šæœ‰è´­ä¹°è¡Œä¸º
    if "buyer" in profile.behaviors:
        add_to_segment(user_id, "high_value")
    
    # ç§»åŠ¨ç”¨æˆ·ï¼šä¸»è¦ä½¿ç”¨ç§»åŠ¨è®¾å¤‡
    if profile.demographics.get("device_type") == "mobile":
        add_to_segment(user_id, "mobile_users")
    
    # å¹´è½»æˆäººï¼š18-35å²
    age = profile.demographics.get("age")
    if age and 18 <= age <= 35:
        add_to_segment(user_id, "young_adults")
```

### æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

#### å¼‚æ­¥å¹¶å‘å¤„ç†
- **å¹¶è¡ŒDSPç«ä»·**: ä½¿ç”¨`asyncio.gather`åŒæ—¶å‘å¤šä¸ªDSPå‘é€è¯·æ±‚
- **è¶…æ—¶æ§åˆ¶**: ä¸¥æ ¼çš„50ms DSPè¶…æ—¶ï¼Œ100msæ€»æµç¨‹è¶…æ—¶
- **è¿æ¥æ± **: HTTPå®¢æˆ·ç«¯è¿æ¥å¤ç”¨ï¼Œå‡å°‘è¿æ¥å¼€é”€
- **å†…å­˜ç¼“å­˜**: çƒ­ç‚¹æ•°æ®å†…å­˜ç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢

#### æ•°æ®åº“ä¼˜åŒ–
- **ç´¢å¼•ç­–ç•¥**: é’ˆå¯¹æŸ¥è¯¢æ¨¡å¼ä¼˜åŒ–çš„å¤åˆç´¢å¼•
- **è¿æ¥æ± **: å¼‚æ­¥æ•°æ®åº“è¿æ¥æ± ï¼Œæ”¯æŒé«˜å¹¶å‘
- **æ‰¹é‡æ“ä½œ**: æ‰¹é‡æ’å…¥å’Œæ›´æ–°ï¼Œæé«˜å†™å…¥æ€§èƒ½
- **è¯»å†™åˆ†ç¦»**: æ”¯æŒä¸»ä»æ•°æ®åº“é…ç½®

### å®¹é”™å’ŒéŸ§æ€§è®¾è®¡

#### ç†”æ–­å™¨æ¨¡å¼
```python
class CircuitBreaker:
    def __init__(self, failure_threshold=5, recovery_timeout=60):
        self.failure_count = 0
        self.state = "CLOSED"  # CLOSED, OPEN, HALF_OPEN
    
    async def call(self, func, *args, **kwargs):
        if self.state == "OPEN":
            if self._should_attempt_reset():
                self.state = "HALF_OPEN"
            else:
                raise ServiceError("Circuit breaker is OPEN")
        
        try:
            result = await func(*args, **kwargs)
            self._on_success()
            return result
        except Exception as e:
            self._on_failure()
            raise e
```

#### é‡è¯•æœºåˆ¶
- **æŒ‡æ•°é€€é¿**: å¤±è´¥åç­‰å¾…æ—¶é—´æŒ‡æ•°å¢é•¿
- **æœ€å¤§é‡è¯•æ¬¡æ•°**: é˜²æ­¢æ— é™é‡è¯•æ¶ˆè€—èµ„æº
- **å¹‚ç­‰æ€§ä¿è¯**: ç¡®ä¿é‡è¯•æ“ä½œçš„å®‰å…¨æ€§

## ğŸ“– å®Œæ•´æ–‡æ¡£

### ğŸ“‹ ç³»ç»Ÿæ–‡æ¡£
- [éƒ¨ç½²å’Œè¿è¡Œæ–‡æ¡£](docs/deployment.md) - è¯¦ç»†çš„éƒ¨ç½²æŒ‡å—å’Œè¿ç»´æ‰‹å†Œ
- [APIæ¥å£æ–‡æ¡£](docs/api-documentation.md) - å®Œæ•´çš„APIå‚è€ƒå’Œç¤ºä¾‹
- [æ¶æ„è®¾è®¡æ–‡æ¡£](.kiro/specs/ad-system-architecture/design.md) - ç³»ç»Ÿè®¾è®¡è¯´æ˜å’ŒæŠ€æœ¯å†³ç­–
- [éœ€æ±‚æ–‡æ¡£](.kiro/specs/ad-system-architecture/requirements.md) - åŠŸèƒ½éœ€æ±‚å’ŒéªŒæ”¶æ ‡å‡†

### ğŸ“š å¼€å‘æ–‡æ¡£
- [ä»£ç è§„èŒƒ](docs/coding-standards.md) - ä»£ç é£æ ¼å’Œæœ€ä½³å®è·µ
- [æµ‹è¯•æŒ‡å—](docs/testing-guide.md) - æµ‹è¯•ç­–ç•¥å’Œç”¨ä¾‹ç¼–å†™
- [æ€§èƒ½ä¼˜åŒ–](docs/performance-tuning.md) - æ€§èƒ½è°ƒä¼˜å’Œç›‘æ§æŒ‡å—
- [æ•…éšœæ’æŸ¥](docs/troubleshooting.md) - å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### ğŸ“ å­¦ä¹ èµ„æº
- [RTBåŸºç¡€çŸ¥è¯†](docs/rtb-basics.md) - å®æ—¶ç«ä»·åŸç†å’Œæµç¨‹
- [ç¨‹åºåŒ–å¹¿å‘Šæ¦‚è¿°](docs/programmatic-advertising.md) - è¡Œä¸šèƒŒæ™¯å’Œå‘å±•è¶‹åŠ¿
- [ç³»ç»Ÿæ‰©å±•æŒ‡å—](docs/system-extension.md) - å¦‚ä½•æ‰©å±•å’Œå®šåˆ¶ç³»ç»Ÿ

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ†˜ æ”¯æŒå’Œå¸®åŠ©

- æŸ¥çœ‹ [Issues](https://github.com/your-repo/issues) æŠ¥å‘Šé—®é¢˜
- æŸ¥çœ‹ [Wiki](https://github.com/your-repo/wiki) è·å–æ›´å¤šæ–‡æ¡£
- è”ç³»å¼€å‘å›¢é˜Ÿè·å–æŠ€æœ¯æ”¯æŒ

## ğŸ”„ ç‰ˆæœ¬å†å²

- **v1.0.0** - åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«å®Œæ•´çš„ RTB æ¼”ç¤ºç³»ç»Ÿ
- **v1.1.0** - æ·»åŠ æ•°æ®æŒä¹…åŒ–å’Œç›‘æ§åŠŸèƒ½
- **v1.2.0** - å¢å¼ºå®¹å™¨åŒ–éƒ¨ç½²å’Œç”Ÿäº§ç¯å¢ƒæ”¯æŒ

## ğŸ“ é¡¹ç›®æ•™è‚²ä»·å€¼

### å­¦ä¹ ç›®æ ‡
æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¨‹åºåŒ–å¹¿å‘Šç³»ç»Ÿæ¼”ç¤ºï¼Œé€‚åˆä»¥ä¸‹å­¦ä¹ åœºæ™¯ï¼š

#### ğŸ—ï¸ ç³»ç»Ÿæ¶æ„å­¦ä¹ 
- **å¾®æœåŠ¡æ¶æ„**: ç†è§£æœåŠ¡æ‹†åˆ†ã€é€šä¿¡å’Œåè°ƒ
- **å¼‚æ­¥ç¼–ç¨‹**: æŒæ¡Python asyncioå’Œé«˜å¹¶å‘å¤„ç†
- **APIè®¾è®¡**: å­¦ä¹ RESTful APIè®¾è®¡å’Œæœ€ä½³å®è·µ
- **æ•°æ®å»ºæ¨¡**: ç†è§£å¤æ‚ä¸šåŠ¡åœºæ™¯çš„æ•°æ®æ¨¡å‹è®¾è®¡

#### ğŸ’¼ ä¸šåŠ¡é¢†åŸŸçŸ¥è¯†
- **ç¨‹åºåŒ–å¹¿å‘Š**: æ·±å…¥ç†è§£RTBã€DSPã€SSPã€DMPç­‰æ¦‚å¿µ
- **å®æ—¶ç«ä»·**: æŒæ¡æ¯«ç§’çº§å†³ç­–ç³»ç»Ÿçš„è®¾è®¡å’Œå®ç°
- **ç”¨æˆ·ç”»åƒ**: å­¦ä¹ æ•°æ®é©±åŠ¨çš„ç”¨æˆ·åˆ†æå’Œå®šå‘æŠ€æœ¯
- **æ”¶ç›Šä¼˜åŒ–**: ç†è§£å¹¿å‘Šå˜ç°å’Œæ”¶ç›Šæœ€å¤§åŒ–ç­–ç•¥

#### ğŸ”§ æŠ€æœ¯æŠ€èƒ½æå‡
- **FastAPIæ¡†æ¶**: ç°ä»£Python Webå¼€å‘æ¡†æ¶
- **æ•°æ®åº“è®¾è®¡**: SQLAlchemy ORMå’Œæ•°æ®åº“ä¼˜åŒ–
- **å®¹å™¨åŒ–éƒ¨ç½²**: Dockerå’ŒDocker Composeå®è·µ
- **æµ‹è¯•é©±åŠ¨å¼€å‘**: å®Œæ•´çš„æµ‹è¯•ç­–ç•¥å’Œå®ç°

### ä»£ç ç‰¹è‰²

#### ğŸ“ ä¸­æ–‡æ³¨é‡Šå’Œæ–‡æ¡£
- æ‰€æœ‰æ ¸å¿ƒå‡½æ•°éƒ½æœ‰è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Š
- ä¸šåŠ¡é€»è¾‘è§£é‡Šæ¸…æ™°ï¼Œä¾¿äºç†è§£
- åŒ…å«ç®—æ³•æ€è·¯å’Œè®¾è®¡å†³ç­–è¯´æ˜
- æä¾›å®Œæ•´çš„APIä½¿ç”¨ç¤ºä¾‹

#### ğŸ›ï¸ ä¼ä¸šçº§ä»£ç ç»“æ„
```
ad-system-architecture/
â”œâ”€â”€ ğŸ¢ server/                    # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ ğŸ“Š ad-management/         # å¹¿å‘Šç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ’° dsp/                   # éœ€æ±‚æ–¹å¹³å°
â”‚   â”œâ”€â”€ ğŸ“º ssp/                   # ä¾›åº”æ–¹å¹³å°  
â”‚   â”œâ”€â”€ ğŸ›ï¸ ad-exchange/           # å¹¿å‘Šäº¤æ˜“å¹³å°
â”‚   â””â”€â”€ ğŸ“ˆ dmp/                   # æ•°æ®ç®¡ç†å¹³å°
â”œâ”€â”€ ğŸ”§ shared/                    # å…±äº«ç»„ä»¶å±‚
â”‚   â”œâ”€â”€ ğŸ“‹ models.py              # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ ğŸ› ï¸ utils.py               # å·¥å…·å‡½æ•°é›†åˆ
â”‚   â”œâ”€â”€ ğŸ’¾ database.py            # æ•°æ®åº“è®¿é—®å±‚
â”‚   â””â”€â”€ âš™ï¸ config.py              # é…ç½®ç®¡ç†
â”œâ”€â”€ ğŸ§ª tests/                     # æµ‹è¯•å¥—ä»¶
â”œâ”€â”€ ğŸ“œ scripts/                   # è¿ç»´è„šæœ¬
â””â”€â”€ ğŸ“š docs/                      # é¡¹ç›®æ–‡æ¡£
```

#### ğŸ¯ æœ€ä½³å®è·µç¤ºä¾‹
- **é”™è¯¯å¤„ç†**: å®Œæ•´çš„å¼‚å¸¸å¤„ç†å’Œé”™è¯¯å“åº”æœºåˆ¶
- **æ—¥å¿—è®°å½•**: ç»“æ„åŒ–æ—¥å¿—å’Œé“¾è·¯è¿½è¸ª
- **é…ç½®ç®¡ç†**: ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ç®¡ç†
- **æ€§èƒ½ç›‘æ§**: å¥åº·æ£€æŸ¥å’Œæ€§èƒ½æŒ‡æ ‡æ”¶é›†
- **å®‰å…¨è€ƒè™‘**: æ•°æ®éªŒè¯å’Œè¾“å…¥æ¸…ç†

### å®é™…åº”ç”¨åœºæ™¯

#### ğŸ¯ å¹¿å‘ŠæŠ€æœ¯å…¬å¸
- ç†è§£ç¨‹åºåŒ–å¹¿å‘Šçš„å®Œæ•´æŠ€æœ¯æ ˆ
- å­¦ä¹ å®æ—¶ç«ä»·ç³»ç»Ÿçš„æ¶æ„è®¾è®¡
- æŒæ¡å¤§è§„æ¨¡å¹¶å‘å¤„ç†çš„æŠ€æœ¯æ–¹æ¡ˆ

#### ğŸ« æ•™è‚²åŸ¹è®­æœºæ„
- ä½œä¸ºå¾®æœåŠ¡æ¶æ„çš„æ•™å­¦æ¡ˆä¾‹
- Pythonå¼‚æ­¥ç¼–ç¨‹çš„å®è·µé¡¹ç›®
- å¤æ‚ä¸šåŠ¡ç³»ç»Ÿçš„è®¾è®¡å‚è€ƒ

#### ğŸ’» ä¸ªäººæŠ€èƒ½æå‡
- æå‡ç³»ç»Ÿè®¾è®¡å’Œæ¶æ„èƒ½åŠ›
- å­¦ä¹ ç°ä»£Pythonå¼€å‘æŠ€æœ¯æ ˆ
- ç†è§£ä¼ä¸šçº§é¡¹ç›®çš„å¼€å‘æµç¨‹

### æ‰©å±•å­¦ä¹ å»ºè®®

#### ğŸ“ˆ è¿›é˜¶å­¦ä¹ è·¯å¾„
1. **æ€§èƒ½ä¼˜åŒ–**: å­¦ä¹ ç¼“å­˜ã€æ•°æ®åº“ä¼˜åŒ–ã€CDNç­‰æŠ€æœ¯
2. **å®‰å…¨åŠ å›º**: æ·»åŠ è®¤è¯æˆæƒã€æ•°æ®åŠ å¯†ã€é˜²æŠ¤æœºåˆ¶
3. **ç›‘æ§å‘Šè­¦**: é›†æˆPrometheusã€Grafanaç­‰ç›‘æ§ç³»ç»Ÿ
4. **äº‘åŸç”Ÿ**: å­¦ä¹ Kubernetesã€æœåŠ¡ç½‘æ ¼ç­‰äº‘åŸç”ŸæŠ€æœ¯

#### ğŸ”„ é¡¹ç›®æ”¹è¿›æ–¹å‘
1. **æ•°æ®åº“å‡çº§**: ä»SQLiteå‡çº§åˆ°PostgreSQLæˆ–MongoDB
2. **æ¶ˆæ¯é˜Ÿåˆ—**: å¼•å…¥Redisæˆ–RabbitMQå¤„ç†å¼‚æ­¥ä»»åŠ¡
3. **æœºå™¨å­¦ä¹ **: é›†æˆæ¨èç®—æ³•å’Œæ™ºèƒ½å‡ºä»·æ¨¡å‹
4. **å‰ç«¯ç•Œé¢**: å¼€å‘ç®¡ç†åå°å’Œæ•°æ®å¯è§†åŒ–ç•Œé¢

---

## âš ï¸ é‡è¦è¯´æ˜

**æœ¬é¡¹ç›®ä¸ºæ•™è‚²æ¼”ç¤ºé¡¹ç›®**ï¼Œä¸“é—¨è®¾è®¡ç”¨äºå­¦ä¹ å’Œç†è§£ç¨‹åºåŒ–å¹¿å‘Šç³»ç»Ÿæ¶æ„ã€‚

### ğŸ¯ é€‚ç”¨åœºæ™¯
- âœ… å­¦ä¹ å¾®æœåŠ¡æ¶æ„è®¾è®¡
- âœ… ç†è§£ç¨‹åºåŒ–å¹¿å‘Šä¸šåŠ¡æµç¨‹
- âœ… æŒæ¡Pythonå¼‚æ­¥ç¼–ç¨‹æŠ€æœ¯
- âœ… ç»ƒä¹ ä¼ä¸šçº§é¡¹ç›®å¼€å‘

### âš ï¸ ç”Ÿäº§ç¯å¢ƒæ³¨æ„äº‹é¡¹
å¦‚éœ€åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Œè¯·åŠ¡å¿…è¿›è¡Œä»¥ä¸‹æ”¹è¿›ï¼š
- ğŸ”’ **å®‰å…¨åŠ å›º**: æ·»åŠ è®¤è¯æˆæƒã€HTTPSã€æ•°æ®åŠ å¯†
- ğŸš€ **æ€§èƒ½ä¼˜åŒ–**: æ•°æ®åº“ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥ã€è´Ÿè½½å‡è¡¡
- ğŸ“Š **ç›‘æ§å‘Šè­¦**: å®Œæ•´çš„ç›‘æ§ä½“ç³»å’Œå‘Šè­¦æœºåˆ¶
- ğŸ›¡ï¸ **å®¹é”™å¤„ç†**: æ›´å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶
- ğŸ“‹ **åˆè§„è¦æ±‚**: æ»¡è¶³æ•°æ®ä¿æŠ¤å’Œéšç§æ³•è§„è¦æ±‚
